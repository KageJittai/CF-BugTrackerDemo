@model IEnumerable<BugTrackerDemo.Models.Ticket>

@using BugTrackerDemo.Common

@{
    ViewBag.Title = "Ticket List";
    UserData page = ViewBag.page;
}

<h2>Ticket List</h2>



@if(page.IsSubmitter)
{
<p>
    @Html.ActionLink("Submit New Ticket", "Create")
</p>
    
}

<hr />

<table id="TicketTable" class="table">
    <thead>
    <tr>
        <th>
            Updated
        </th>
        <th>
            Status
        </th>
        <th>
            Type
        </th>
        <th>
            Priority
        </th>
        <th>
            Summary
        </th>
        <th>
            Action
        </th>
    </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
    <tr>
        <td>
            @item.UpdatedTime.DateTime.ToString("MM-dd-yyyy")
        </td>
        <td>
            @item.TicketStatus.Status
        </td>
        <td>
            @item.TicketType.Type
        </td>
        <td>
            @item.TicketPriority.Priority
        </td>
        <td class="col-md-6">
            @item.Title
        </td>
        <td>
            @Html.ActionLink("Details", "Details", new { id=item.Id })
            @if (ViewBag.page.IsManager == true)
            {
                @Html.Raw(" | ")
                @Html.ActionLink("Delete", "Delete", new { id=item.Id })
            }
        </td>
    </tr>
}
    </tbody>

</table>

@section scripts
{
    <script type="text/javascript">
        $(document).ready(function()
        {
            $('#TicketTable').DataTable();
        });
    </script>
}

